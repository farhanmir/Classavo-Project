{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Farhan%20Mir/Desktop/Projects/Classavo%20Project/frontend/src/components/PlateEditor.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useCallback, useState, useEffect } from 'react';\r\nimport { Plate, PlateContent, usePlateEditor } from '@udecode/plate-core/react';\r\n\r\nexport default function PlateEditor({ initialValue, onChange, readOnly = false }) {\r\n  const [value, setValue] = useState(null);\r\n  \r\n  // Create editor instance\r\n  const editor = usePlateEditor({\r\n    value: value || [{ type: 'p', children: [{ text: '' }] }],\r\n  });\r\n\r\n  // Initialize value on client side\r\n  useEffect(() => {\r\n    if (!initialValue) {\r\n      setValue([{ type: 'p', children: [{ text: '' }] }]);\r\n      return;\r\n    }\r\n\r\n    if (typeof initialValue === 'string') {\r\n      try {\r\n        const parsed = JSON.parse(initialValue);\r\n        setValue(parsed.content || parsed || [{ type: 'p', children: [{ text: '' }] }]);\r\n      } catch {\r\n        setValue([{ type: 'p', children: [{ text: initialValue }] }]);\r\n      }\r\n    } else if (Array.isArray(initialValue)) {\r\n      setValue(initialValue);\r\n    } else if (typeof initialValue === 'object' && initialValue.content) {\r\n      setValue(initialValue.content);\r\n    } else {\r\n      setValue(initialValue || [{ type: 'p', children: [{ text: '' }] }]);\r\n    }\r\n  }, [initialValue]);\r\n\r\n  const handleChange = useCallback(\r\n    ({ value: newValue }) => {\r\n      setValue(newValue);\r\n      if (!readOnly && onChange) {\r\n        onChange(newValue);\r\n      }\r\n    },\r\n    [readOnly, onChange]\r\n  );\r\n\r\n  // Don't render until value is initialized\r\n  if (value === null) {\r\n    return <div className=\"min-h-[400px] bg-gray-50 animate-pulse rounded-lg\" />;\r\n  }\r\n\r\n  if (readOnly) {\r\n    return (\r\n      <div className=\"prose max-w-none p-6 bg-white rounded-lg border border-gray-200\">\r\n        <Plate editor={editor} value={value} readOnly>\r\n          <PlateContent className=\"min-h-[200px]\" readOnly />\r\n        </Plate>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"border border-gray-300 rounded-lg overflow-hidden bg-white\">\r\n      <Plate editor={editor} value={value} onChange={handleChange}>\r\n        <PlateContent \r\n          className=\"min-h-[400px] p-4 focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n          placeholder=\"Start typing your chapter content...\"\r\n        />\r\n      </Plate>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS,YAAY,EAAE,YAAY,EAAE,QAAQ,EAAE,WAAW,KAAK,EAAE;;IAC9E,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,yBAAyB;IACzB,MAAM,SAAS,IAAA,0MAAc,EAAC;QAC5B,OAAO,SAAS;YAAC;gBAAE,MAAM;gBAAK,UAAU;oBAAC;wBAAE,MAAM;oBAAG;iBAAE;YAAC;SAAE;IAC3D;IAEA,kCAAkC;IAClC,IAAA,0KAAS;iCAAC;YACR,IAAI,CAAC,cAAc;gBACjB,SAAS;oBAAC;wBAAE,MAAM;wBAAK,UAAU;4BAAC;gCAAE,MAAM;4BAAG;yBAAE;oBAAC;iBAAE;gBAClD;YACF;YAEA,IAAI,OAAO,iBAAiB,UAAU;gBACpC,IAAI;oBACF,MAAM,SAAS,KAAK,KAAK,CAAC;oBAC1B,SAAS,OAAO,OAAO,IAAI,UAAU;wBAAC;4BAAE,MAAM;4BAAK,UAAU;gCAAC;oCAAE,MAAM;gCAAG;6BAAE;wBAAC;qBAAE;gBAChF,EAAE,OAAM;oBACN,SAAS;wBAAC;4BAAE,MAAM;4BAAK,UAAU;gCAAC;oCAAE,MAAM;gCAAa;6BAAE;wBAAC;qBAAE;gBAC9D;YACF,OAAO,IAAI,MAAM,OAAO,CAAC,eAAe;gBACtC,SAAS;YACX,OAAO,IAAI,OAAO,iBAAiB,YAAY,aAAa,OAAO,EAAE;gBACnE,SAAS,aAAa,OAAO;YAC/B,OAAO;gBACL,SAAS,gBAAgB;oBAAC;wBAAE,MAAM;wBAAK,UAAU;4BAAC;gCAAE,MAAM;4BAAG;yBAAE;oBAAC;iBAAE;YACpE;QACF;gCAAG;QAAC;KAAa;IAEjB,MAAM,eAAe,IAAA,4KAAW;iDAC9B,CAAC,EAAE,OAAO,QAAQ,EAAE;YAClB,SAAS;YACT,IAAI,CAAC,YAAY,UAAU;gBACzB,SAAS;YACX;QACF;gDACA;QAAC;QAAU;KAAS;IAGtB,0CAA0C;IAC1C,IAAI,UAAU,MAAM;QAClB,qBAAO,6LAAC;YAAI,WAAU;;;;;;IACxB;IAEA,IAAI,UAAU;QACZ,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC,iMAAK;gBAAC,QAAQ;gBAAQ,OAAO;gBAAO,QAAQ;0BAC3C,cAAA,6LAAC,wMAAY;oBAAC,WAAU;oBAAgB,QAAQ;;;;;;;;;;;;;;;;IAIxD;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC,iMAAK;YAAC,QAAQ;YAAQ,OAAO;YAAO,UAAU;sBAC7C,cAAA,6LAAC,wMAAY;gBACX,WAAU;gBACV,aAAY;;;;;;;;;;;;;;;;AAKtB;GAlEwB;;QAIP,0MAAc;;;KAJP","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Farhan%20Mir/Desktop/Projects/Classavo%20Project/frontend/src/app/courses/%5Bid%5D/chapters/%5BchapterId%5D/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useParams } from 'next/navigation';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport Link from 'next/link';\r\nimport api from '@/lib/axios';\r\nimport useAuthStore from '@/store/authStore';\r\nimport PlateEditor from '@/components/PlateEditor';\r\n\r\nexport default function ChapterViewerPage() {\r\n  const params = useParams();\r\n  const { user } = useAuthStore();\r\n  const { id: courseId, chapterId } = params;\r\n\r\n  const { data: chapter, isLoading, error } = useQuery({\r\n    queryKey: ['chapter', chapterId],\r\n    queryFn: async () => {\r\n      const response = await api.get(`/chapters/${chapterId}/`);\r\n      return response.data;\r\n    },\r\n    enabled: chapterId !== 'new' && !!chapterId,\r\n    retry: false,\r\n  });\r\n\r\n  const { data: chapters = [] } = useQuery({\r\n    queryKey: ['chapters', courseId],\r\n    queryFn: async () => {\r\n      const response = await api.get(`/chapters/?course_id=${courseId}`);\r\n      return response.data.results || response.data;\r\n    },\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    const status = error.response?.status;\r\n    \r\n    if (status === 403) {\r\n      return (\r\n        <div className=\"bg-yellow-100 border border-yellow-400 text-yellow-700 px-6 py-4 rounded-lg\">\r\n          <h2 className=\"text-xl font-bold mb-2\">Access Denied</h2>\r\n          <p className=\"mb-4\">\r\n            This chapter is private. You need to enroll in the course to access it.\r\n          </p>\r\n          <Link\r\n            href={`/courses/${courseId}`}\r\n            className=\"inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\r\n          >\r\n            Back to Course\r\n          </Link>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n        <p>Error loading chapter. Please try again later.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const currentIndex = chapters.findIndex((ch) => ch.id === parseInt(chapterId));\r\n  const previousChapter = currentIndex > 0 ? chapters[currentIndex - 1] : null;\r\n  const nextChapter = currentIndex < chapters.length - 1 ? chapters[currentIndex + 1] : null;\r\n\r\n  // Check if user is instructor - role is in profile\r\n  const isInstructor = user?.profile?.role === 'instructor';\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      {/* Breadcrumb */}\r\n      <div className=\"mb-6 text-gray-600\">\r\n        <Link href={`/courses/${courseId}`} className=\"hover:text-blue-600\">\r\n          {chapter?.course_title || 'Course'}\r\n        </Link>\r\n        <span className=\"mx-2\">â€º</span>\r\n        <span className=\"text-gray-800\">{chapter?.title}</span>\r\n      </div>\r\n\r\n      {/* Chapter Header */}\r\n      <div className=\"bg-white rounded-lg shadow-md p-8 mb-8\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h1 className=\"text-3xl font-bold text-gray-800\">\r\n            {chapter?.title}\r\n          </h1>\r\n          {isInstructor && (\r\n            <Link href={`/courses/${courseId}/chapters/${chapterId}/edit`}>\r\n              <button className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\">\r\n                Edit Chapter\r\n              </button>\r\n            </Link>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"text-sm text-gray-500 mb-6\">\r\n          Chapter {chapter?.order}\r\n          {chapter?.is_public && (\r\n            <span className=\"ml-2 bg-green-100 text-green-800 px-2 py-1 rounded text-xs\">\r\n              Public\r\n            </span>\r\n          )}\r\n        </div>\r\n\r\n        {/* Chapter Content */}\r\n        <div className=\"prose max-w-none\">\r\n          <PlateEditor initialValue={chapter?.content} readOnly={true} />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navigation */}\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        {previousChapter ? (\r\n          <Link\r\n            href={`/courses/${courseId}/chapters/${previousChapter.id}`}\r\n            className=\"flex items-center text-blue-600 hover:text-blue-800\"\r\n          >\r\n            <svg\r\n              className=\"w-5 h-5 mr-2\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M15 19l-7-7 7-7\"\r\n              />\r\n            </svg>\r\n            Previous: {previousChapter?.title}\r\n          </Link>\r\n        ) : (\r\n          <div></div>\r\n        )}\r\n\r\n        <Link\r\n          href={`/courses/${courseId}`}\r\n          className=\"bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300\"\r\n        >\r\n          Back to Course\r\n        </Link>\r\n\r\n        {nextChapter ? (\r\n          <Link\r\n            href={`/courses/${courseId}/chapters/${nextChapter.id}`}\r\n            className=\"flex items-center text-blue-600 hover:text-blue-800\"\r\n          >\r\n            Next: {nextChapter?.title}\r\n            <svg\r\n              className=\"w-5 h-5 ml-2\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M9 5l7 7-7 7\"\r\n              />\r\n            </svg>\r\n          </Link>\r\n        ) : (\r\n          <div></div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}